import { Pagination } from '@/types/global';
import axios from 'axios';
import qs from 'query-string';

export interface tableListRow {
  id: number;
  affected: string;
  name: string;
  namespace: string;
  summary: string;
  updateTime: string;
  modified: string;
  cvss: object;
  description: string;
}
export interface TableQueryParams {
  page: number;
  perPage: number;
  query: string;
}
export interface tableListRes {
  filters: unknown;
  items: tableListRow[];
  pagination: Pagination;
}

export function queryDataList(params: TableQueryParams) {
  return axios.get<tableListRes>('/vulnerabilities', {
    params,
    paramsSerializer: (obj) => {
      return qs.stringify(obj);
    },
  });
}
export function queryDataDetail(id) {
  return axios.get(`/vulnerabilities/${id}`);
}
